/* ===================== Base ===================== */
@font-face{
  font-family: "FancyCatPX";
  src:
    url("fonts/FancyCatPX.woff2") format("woff2"),
    url("fonts/FancyCatPX.woff")  format("woff"),
    url("fonts/FancyCatPX.ttf")   format("truetype");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

:root{
  --bg:#000; --fg:#fff; --muted:#aaa; --ring:#a0a0a0;
  --chip-bg:#333; --chip-br:#666; --accent-yellow:#ffff55;
}

html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--fg);
  font-family:"FancyCatPX", system-ui, "Segoe UI", Arial, sans-serif;
  display:grid; place-items:center;
}

/* ===================== Timer layout ===================== */
.timer-app{ display:grid; justify-items:center; align-items:center; gap:16px; }

/* Rendered display */
#timerDisplay{
  grid-area:1/1; font-size:8vw; line-height:1; letter-spacing:.04em;
  margin:0; user-select:none; cursor:default; text-shadow:0 0 1px #ffffff1f;
}

/* Edit input sits directly on top of display and fully hides it */
#timerInput{
  grid-area:1/1; display:none; font:inherit; font-size:8vw; line-height:1; letter-spacing:.04em;
  padding:.15em .3em; color:#fff; background:#000; border:2px solid #777; border-radius:10px;
  text-align:center; caret-color:#fff; z-index:2;
}
#timerInput::selection{ background:#2b6cf5; color:#fff; }

/* Mono alignment helpers for non-mono fonts */
.monochar{ display:inline-block; width:.8em; text-align:center; }
.monochar--sep{ width:.35em; }

/* Buttons / gear (original size/position) */
button{ font:inherit; }
.icon-btn{ position:fixed; top:10px; left:10px; background:none; border:0; cursor:pointer; }
.icon{ width:24px; height:24px; display:block; }

/* ===================== Modal (compact, centered, draggable) ===================== */
.modal{
  position:fixed; inset:0; display:none; align-items:flex-start; justify-content:center;
    font-family: system-ui;
}
.modal.show{ display:flex; }

/* card */
.modal-content{
  position:fixed; top:var(--modal-top,6vh); left:50%;
  transform:translate(calc(-50% + var(--modal-dx,0px)), var(--modal-dy,0px));
  width:min(720px,93vw);
  padding:26px 22px 18px; /* extra top space for dragpad/X */
  background:#0c0c0c; color:#fff;
  border:6px solid var(--ring); border-radius:22px; box-shadow:0 18px 60px #0008;
  font-family:system-ui, "Segoe UI", Arial, sans-serif;
  text-align:center; overflow:hidden;
}

/* dragpad: empty strip you can grab without hitting controls */
.modal-dragpad{
  position:absolute; inset:0 0 auto 0; height:30px; background:transparent; cursor:grab; z-index:1;
}
.modal-dragpad:active{ cursor:grabbing; }

/* close button (always top-right, small hitbox, above dragpad) */
#settingsModal .close-btn{
  position:absolute !important; top:10px !important; right:12px !important; left:auto !important;
  z-index:3; padding:6px; border-radius:10px;
}
#settingsModal .close-btn:hover{ background:#ffffff0f; }
#settingsModal .close-btn .icon{ width:26px; height:26px; }

/* header */
.settings-header{
  display:grid; grid-template-columns:auto 1fr; gap:12px;
  align-items:center; justify-items:center; margin:12px 0 10px;
}
.font-header-icon{ width:26px; height:26px; opacity:.9; }
.font-header-text{ font-size:22px; font-weight:800; letter-spacing:.06em; }

/* rows */
.row{ display:flex; gap:12px; margin:10px 0; justify-content:center; }
.row.wrap{ flex-wrap:wrap; flex-direction:column; align-items:center; }
.row.align-center{ align-items:center; }
.row-split{ display:grid; grid-template-columns:1fr auto; gap:12px; align-items:center; justify-items:center; }
.stack{ display:flex; flex-direction:column; gap:6px; align-items:center; }

.section-title{ margin:12px 0 4px; font-size:16px; font-weight:800; letter-spacing:.04em; }
.linkish{ color:#77a7ff; text-decoration:underline; cursor:pointer; }
.muted{ color:var(--muted); } .small{ font-size:.95em; } .tiny{ font-size:.85em; }

/* inputs width */
select, input[type="text"], input[type="url"], input[type="number"], button.setting-input{
  font:inherit; line-height:1.25;
}
select{ width:auto; min-width:160px; }
#tpsSelect{ min-width:120px; }
#hurryUpMain, #hurryUpSub{ min-width:180px; }
#musicUrlInput{ width:100%; }

/* direction */
.chip{ background:var(--chip-bg); color:#fff; border:1px solid var(--chip-br); border-radius:10px; padding:2px 10px; font-weight:700; cursor:pointer; }
.chip:hover{ background:#3a3a3a; }
.target-time{ color:var(--accent-yellow); font-weight:800; }

/* dragging class to prevent text selection */
.modal-dragging{ cursor:grabbing !important; user-select:none !important; }

/* ===================== Mobile ===================== */
@media (max-width:480px){
  #timerDisplay,#timerInput{ font-size:16vw; }
  .modal-content{ width:min(640px,95vw); padding:22px 16px 16px; }
  .row{ gap:10px; } select{ min-width:140px; }
  #hurryUpMain,#hurryUpSub{ min-width:160px; }
}